// Main
import React, { Component } from 'react';
import { Link, browserHistory } from 'react-router';


// Mongo collections
import { Albums } from '../../../imports/collections/albums';


export default class AlbumNavigation extends Component {

  constructor(props) {
    super(props);

    this.state = {
      subscription: {
        albums: Meteor.subscribe('albums')
      }
    }
  }

  capitalizeFirstLetter(string) {
    return string.charAt(0).toUpperCase() + string.slice(1);
  }

  target() {
    const url = this.props.album.params.url
    return Albums.find({title: this.capitalizeFirstLetter(url)}).fetch()
  }

  componentDidMount() {

    Tracker.autorun(() => {

      if (Albums.find().count()) {

        var targetAlbum = this.target()[0]
        var link = this.props.album.params.url;

        $(document).ready(function(){
          $('.share').ShareLink({
              title: targetAlbum.title,
              text: targetAlbum.description,
              image: targetAlbum.cover,
              url: 'https://www.currentWebsite.com/portfolio/' + link
          });
        });

        $(".share").click(function () {
           timer = setTimeout(function(){
             $(".share-button").fadeToggle(100, "linear")
             $( ".share-button" ).replaceWith( "<p>Thank you! " );
             $(".social-share").fadeToggle("slow", "linear")
           }, 2000);
        })
      }
    })

  }

  share() {
    $(".social-share").fadeToggle("slow", "linear")
    $(".share-button").fadeToggle(10, "linear")
  }

  render() {

    return (

      <nav className="navbar navbar-fixed-top bg-default flex-navbar album-navbar">


        <div className='navbar-brand bold logo'>
          <Link to='#'>LOGO</Link>
        </div>


        <div className="nav navbar-nav share-navbar">

          <div className="nav-item nav-share">
            <a className="nav-link bold active share-button" onClick={this.share}>SHARE</a>
          </div>

          <div className="nav-item nav-back">
            <Link className="nav-link bold" to='/portfolio'>BACK</Link>
          </div>

          <div className='social-share nav-social'>
            <a className='share s_vk'>
              <svg className='vkSvg' viewBox="0 0 96.124 96.123" >
                <g>
                  <path className='fillPath' fill="#434343" d="M95.263,70.006c-0.116-0.249-0.223-0.456-0.323-0.621c-1.655-2.981-4.819-6.641-9.489-10.98l-0.099-0.099
                    l-0.049-0.049l-0.05-0.05h-0.05c-2.119-2.02-3.461-3.379-4.023-4.074c-1.028-1.325-1.259-2.666-0.697-4.025
                    c0.397-1.027,1.889-3.195,4.471-6.507c1.358-1.755,2.434-3.162,3.229-4.222c5.73-7.618,8.214-12.486,7.452-14.605l-0.296-0.495
                    c-0.199-0.298-0.712-0.571-1.539-0.82c-0.829-0.248-1.888-0.289-3.18-0.124l-14.307,0.099c-0.232-0.082-0.563-0.074-0.994,0.025
                    c-0.431,0.1-0.646,0.149-0.646,0.149l-0.249,0.124l-0.198,0.149c-0.166,0.099-0.348,0.273-0.547,0.521
                    c-0.198,0.248-0.363,0.538-0.496,0.869c-1.558,4.007-3.329,7.733-5.316,11.177c-1.225,2.054-2.351,3.834-3.379,5.341
                    c-1.026,1.506-1.888,2.616-2.583,3.328c-0.696,0.712-1.324,1.283-1.888,1.714c-0.563,0.431-0.993,0.613-1.291,0.547
                    c-0.298-0.067-0.579-0.133-0.845-0.199c-0.463-0.298-0.836-0.704-1.117-1.217c-0.282-0.513-0.472-1.159-0.572-1.938
                    c-0.099-0.779-0.157-1.449-0.174-2.012c-0.015-0.563-0.008-1.358,0.025-2.385c0.034-1.027,0.05-1.722,0.05-2.086
                    c0-1.259,0.025-2.625,0.074-4.099c0.05-1.474,0.091-2.641,0.125-3.502s0.049-1.772,0.049-2.733s-0.058-1.714-0.174-2.26
                    c-0.114-0.546-0.289-1.076-0.52-1.59c-0.232-0.513-0.572-0.91-1.018-1.192c-0.447-0.282-1.003-0.505-1.664-0.671
                    c-1.755-0.397-3.991-0.612-6.707-0.646c-6.16-0.066-10.118,0.332-11.873,1.193c-0.695,0.364-1.325,0.861-1.888,1.49
                    c-0.596,0.729-0.679,1.127-0.249,1.192c1.987,0.298,3.394,1.01,4.222,2.136l0.298,0.597c0.232,0.43,0.464,1.193,0.696,2.285
                    c0.232,1.093,0.381,2.301,0.447,3.626c0.165,2.418,0.165,4.488,0,6.21c-0.166,1.723-0.322,3.064-0.472,4.024
                    c-0.149,0.96-0.373,1.739-0.671,2.335s-0.497,0.96-0.596,1.093c-0.099,0.132-0.182,0.216-0.248,0.248
                    c-0.43,0.165-0.878,0.249-1.342,0.249s-1.027-0.232-1.689-0.696s-1.349-1.101-2.061-1.913c-0.712-0.812-1.515-1.946-2.41-3.403
                    c-0.894-1.457-1.821-3.179-2.782-5.166l-0.795-1.441c-0.497-0.927-1.175-2.277-2.036-4.048c-0.862-1.772-1.623-3.486-2.285-5.142
                    c-0.265-0.695-0.662-1.225-1.192-1.589l-0.249-0.149c-0.165-0.132-0.431-0.273-0.795-0.422c-0.365-0.149-0.745-0.257-1.143-0.323
                    l-13.61,0.098c-1.391,0-2.335,0.315-2.832,0.944l-0.199,0.298c-0.099,0.166-0.149,0.431-0.149,0.795s0.099,0.812,0.298,1.341
                    c1.987,4.67,4.148,9.174,6.483,13.513s4.364,7.833,6.085,10.481c1.722,2.65,3.477,5.151,5.266,7.501
                    c1.789,2.352,2.972,3.859,3.552,4.521c0.58,0.663,1.035,1.159,1.367,1.49l1.242,1.192c0.795,0.795,1.962,1.747,3.502,2.856
                    c1.54,1.11,3.246,2.203,5.117,3.28c1.872,1.075,4.049,1.953,6.533,2.632c2.484,0.679,4.901,0.952,7.253,0.821h5.713
                    c1.159-0.1,2.036-0.464,2.633-1.093l0.198-0.249c0.133-0.198,0.257-0.505,0.372-0.918c0.116-0.414,0.174-0.87,0.174-1.366
                    c-0.034-1.424,0.074-2.707,0.322-3.85c0.248-1.142,0.53-2.003,0.845-2.583c0.315-0.579,0.671-1.068,1.068-1.465
                    s0.68-0.638,0.846-0.721c0.165-0.083,0.297-0.14,0.396-0.174c0.795-0.265,1.73-0.008,2.808,0.771
                    c1.077,0.778,2.086,1.739,3.031,2.881c0.944,1.143,2.078,2.426,3.403,3.85c1.325,1.424,2.484,2.483,3.477,3.18l0.993,0.596
                    c0.663,0.398,1.524,0.762,2.584,1.093c1.058,0.331,1.985,0.414,2.781,0.248l12.717-0.198c1.258,0,2.237-0.208,2.931-0.622
                    c0.696-0.414,1.109-0.87,1.242-1.366c0.133-0.497,0.14-1.06,0.025-1.69C95.495,70.694,95.379,70.254,95.263,70.006z"/>
                </g>
              </svg>
            </a>

            <a className='share s_plus'>
              <svg className='gpSvg' viewBox="0 0 96.124 96.123" >
                <g>
                  <path className='fillPath' fill="#434343" d="M62.265,0.103H39.173c-10.29,0-17.413,2.235-23.824,7.482c-5.042,4.31-8.051,10.574-8.051,16.756
                    c0,9.526,7.33,19.648,20.913,19.648c1.306,0,2.752-0.133,4.028-0.251l-0.188,0.453c-0.546,1.296-1.063,2.519-1.063,4.427
                    c0,3.715,1.809,6.007,3.558,8.222l0.22,0.28l-0.391,0.027c-5.609,0.38-16.049,1.09-23.675,5.734
                    c-9.007,5.306-9.707,13.024-9.707,15.262c0,8.905,8.376,17.894,27.09,17.894c21.76,0,33.146-11.895,33.146-23.643
                    c0.002-8.69-5.141-12.98-10.6-17.535l-4.605-3.549c-1.423-1.168-3.195-2.622-3.195-5.315c0-2.647,1.772-4.395,3.336-5.937
                    l0.163-0.163c4.973-3.881,10.609-8.281,10.609-17.799c0-9.569-6.035-14.514-8.937-16.891h7.663c0.094,0,0.188-0.026,0.266-0.076
                    l6.601-4.112c0.188-0.118,0.276-0.345,0.214-0.557C62.685,0.249,62.487,0.103,62.265,0.103z M34.262,90.796
                    c-13.264,0-22.176-6.138-22.176-15.274c0-5.966,3.645-10.3,10.824-12.877c5.749-1.917,13.17-2.012,13.244-2.012
                    c1.257,0,1.889,0,2.893,0.125c9.281,6.544,13.743,9.98,13.743,16.525C52.789,85.618,45.689,90.796,34.262,90.796z M34.137,40.484
                    c-11.132,0-15.752-14.498-15.752-22.261c0-3.947,0.906-6.977,2.77-9.265C23.178,6.45,26.642,4.83,29.98,4.83
                    c10.221,0,15.873,13.612,15.873,23.019c0,1.484,0,5.999-3.148,9.135C40.588,39.078,37.145,40.484,34.137,40.484z"/>
                  <path className='fillPath' fill="#434343" d="M94.631,44.91H82.463V32.897c0-0.273-0.225-0.495-0.5-0.495h-5.234c-0.276,0-0.5,0.222-0.5,0.495V44.91
                    H64.121c-0.276,0-0.5,0.222-0.5,0.495v5.255c0,0.272,0.224,0.495,0.5,0.495h12.107v12.091c0,0.272,0.224,0.495,0.5,0.495h5.234
                    c0.275,0,0.5-0.223,0.5-0.495V51.154H94.63c0.276,0,0.5-0.221,0.5-0.495v-5.253C95.131,45.131,94.908,44.91,94.631,44.91z"/>
                </g>
              </svg>
            </a>

            <a className='share s_twitter'>
              <svg className='twSvg' viewBox="0 0 96.124 96.123" >
                <g>
                  <path className='fillPath' fill="#434343" d="M96.061,18.279c-3.533,1.567-7.324,2.629-11.308,3.103c4.067-2.437,7.181-6.303,8.656-10.895
                    c-3.815,2.257-8.026,3.896-12.513,4.784c-3.593-3.836-8.704-6.225-14.373-6.225c-10.876,0-19.694,8.824-19.694,19.701
                    c0,1.543,0.174,3.049,0.51,4.49C30.974,32.415,16.463,24.57,6.752,12.648c-1.698,2.905-2.663,6.291-2.663,9.905
                    c0,6.837,3.479,12.87,8.758,16.399c-3.227-0.108-6.263-0.996-8.92-2.473v0.246c0,9.544,6.791,17.51,15.795,19.323
                    c-1.65,0.444-3.389,0.69-5.189,0.69c-1.272,0-2.501-0.126-3.707-0.366c2.507,7.834,9.778,13.53,18.392,13.686
                    C22.48,75.341,13.986,78.48,4.76,78.48c-1.59,0-3.155-0.096-4.697-0.27c8.716,5.601,19.064,8.866,30.186,8.866
                    c36.226,0,56.028-30.026,56.028-56.065l-0.066-2.551C90.08,25.698,93.427,22.229,96.061,18.279z"/>
                </g>
              </svg>
            </a>

            <a className='share s_pinterest'>
              <svg className='ptSvg' viewBox="0 0 96.124 96.123" >
                <g>
                  <path className='fillPath' fill="#434343" d="M84.705,26.903C82.102,8.063,63.327-1.53,43.295,0.716c-15.837,1.776-31.627,14.58-32.283,32.89
                    c-0.399,11.178,2.771,19.561,13.406,21.921c4.606-8.151-1.484-9.933-2.437-15.837C18.079,15.559,49.819-0.922,66.443,15.94
                    c11.512,11.678,3.927,47.584-14.616,43.848c-17.762-3.563,8.699-32.145-5.476-37.752c-11.524-4.564-17.643,13.943-12.179,23.142
                    c-3.206,15.82-10.105,30.715-7.311,50.551c9.057-6.578,12.113-19.156,14.616-32.282c4.552,2.771,6.989,5.637,12.793,6.084
                    C75.673,71.192,87.643,48.163,84.705,26.903z"/>
                </g>
              </svg>
            </a>

            <a className='share s_facebook'>
              <svg className='fbSvg' viewBox="0 0 96.124 96.123" >
                <g>
                	<path className='fillPath' fill="#434343" d="M72.089,0.02L59.624,0C45.62,0,36.57,9.285,36.57,23.656v10.907H24.037c-1.083,0-1.96,0.878-1.96,1.961
                		v15.803c0,1.083,0.878,1.96,1.96,1.96H36.57v39.876c0,1.083,0.877,1.96,1.96,1.96h16.352c1.083,0,1.96-0.878,1.96-1.96V54.287
                		h14.654c1.083,0,1.96-0.877,1.96-1.96l0.006-15.803c0-0.52-0.207-1.018-0.574-1.386s-0.867-0.575-1.387-0.575H56.842v-9.246
                		c0-4.444,1.059-6.7,6.848-6.7l8.397-0.003c1.082,0,1.959-0.878,1.959-1.96V1.98C74.046,0.899,73.17,0.022,72.089,0.02z"/>
                </g>
              </svg>
            </a>

          </div>


        </div>


      </nav>
    )
  }

}
